<!DOCTYPE html>
<html lang="zh">
   <head>
      <title><%= title %> - Waterblock79's website</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <link rel="stylesheet" type="text/css" href="/assets/styles.css" />
      <link rel="icon" type="image/png" href="/assets/icon.png" />
      <meta name="description" content="<%= description %>" />
      
      <script
         type="module"
         src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
      ></script>
      <script
         nomodule
         src="https://cdn.jsdelivr.net/npm/ionicons@7.1.0/dist/ionicons/ionicons.js"
      ></script>

      <link
         rel="stylesheet"
         href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css"
      />
      <script
         defer
         src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"
      ></script>

      <script
         async
         src="https://www.googletagmanager.com/gtag/js?id=G-YFC9SHL1Q7"
      ></script>
      <script>
         window.dataLayer = window.dataLayer || [];
         function gtag() {
            dataLayer.push(arguments);
         }
         gtag("js", new Date());
         gtag("config", "G-YFC9SHL1Q7");
      </script>

      <link
         rel="stylesheet"
         href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"
      />
      <link
         rel="stylesheet"
         href="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/github.min.css"
         id="highlightjs-css"
      />
      <script src="https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/lib/highlight.min.js"></script>

      <script>
         if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
            document.querySelector("#highlightjs-css").href =
               "https://cdn.jsdelivr.net/npm/highlight.js@11.11.1/styles/atom-one-dark.min.css";
         }
      </script>

      <style>
         @media screen and (max-width: 512px) {
            body {
               padding: 1.5em 0;
            }
            .post-header {
               justify-content: center;
            }
            .post-header .back {
               display: none;
            }
            .post-content {
               box-shadow: none;
               padding: 1.5em 0;
            }
            ul {
               padding-inline-start: 1em;
            }
         }

         body {
            display: flex;
            flex-direction: column;
            align-items: center;
         }

         .post-content {
            max-width: 50em;
            width: 100%;
         }

         .post-header {
            max-width: 56em;
         }
      </style>
      
      <script type="module">
         import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs";
         mermaid.run({
            querySelector: ".language-mermaid",
         });
      </script>
   </head>
   <body>
      <a class="post-header" href="/">
         <div class="back">❮ 返回</div>
         <div class="site">waterblock79 的小站</div>
      </a>
      <div class="card post-content">
         <div class="title"><%= title %></div>
         <div class="subtitle">
            <%= datetimeString %>
         </div>
         <div class="content markdown-body"><%- content %></div>
      </div>
      <script>
         hljs.highlightAll();
      </script>
      <script>
         // 单行图片处理
         document.querySelectorAll('.post-content > .content p > img:only-child').forEach((img) => {
            if (img.parentNode.childNodes.length > 1) return;
            img.parentElement.classList.add('figure');
            img.classList.add('only-child');
            const alt = document.createElement('div');
            alt.classList.add('image-alt');
            alt.innerText = img.getAttribute('alt');
            img.parentElement.append(alt);
         });
         // 图片点击放大
         document.querySelectorAll('.post-content > .content img').forEach((img) => {
            img.addEventListener('click', () => {
               window.open(img.getAttribute('src'));
            })
         });
         // 为标题添加 id
         document.querySelectorAll('h1, h2, h3').forEach((title) => {
            title.id = title.innerText;
         })
      </script>
   </body>
</html>